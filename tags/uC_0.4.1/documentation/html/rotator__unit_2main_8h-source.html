<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>uC: rotator_unit/main.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>rotator_unit/main.h</h1><a href="rotator__unit_2main_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00005"></a>00005 <span class="comment">//    Copyright (C) 2009  Mikael Larsmark, SM2WMV</span>
<a name="l00006"></a>00006 <span class="comment">//</span>
<a name="l00007"></a>00007 <span class="comment">//    This program is free software: you can redistribute it and/or modify</span>
<a name="l00008"></a>00008 <span class="comment">//    it under the terms of the GNU General Public License as published by</span>
<a name="l00009"></a>00009 <span class="comment">//    the Free Software Foundation, either version 3 of the License, or</span>
<a name="l00010"></a>00010 <span class="comment">//    (at your option) any later version.</span>
<a name="l00011"></a>00011 <span class="comment">//</span>
<a name="l00012"></a>00012 <span class="comment">//    This program is distributed in the hope that it will be useful,</span>
<a name="l00013"></a>00013 <span class="comment">//    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00014"></a>00014 <span class="comment">//    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00015"></a>00015 <span class="comment">//    GNU General Public License for more details.</span>
<a name="l00016"></a>00016 <span class="comment">//</span>
<a name="l00017"></a>00017 <span class="comment">//    You should have received a copy of the GNU General Public License</span>
<a name="l00018"></a>00018 <span class="comment">//    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#ifndef _MAIN_H_</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define _MAIN_H_</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 
<a name="l00025"></a><a class="code" href="rotator__unit_2main_8h.html#dffac4bc5208e16dab5a4bb6a2e0a6f4">00025</a> <span class="preprocessor">#define BUS_RX_QUEUE_SIZE 10</span>
<a name="l00027"></a><a class="code" href="rotator__unit_2main_8h.html#fc2f94db0f2436787adc0230e9f9a035">00027</a> <span class="preprocessor">#define BUS_TX_QUEUE_SIZE       10</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span>
<a name="l00029"></a>00029 <span class="preprocessor">#define ROTATOR_STATUS_UPDATE_INTERVAL  1000</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00032"></a><a class="code" href="rotator__unit_2main_8h.html#1e6ee47355c14bca23b23495babcf203">00032</a> <span class="preprocessor">#define FLAG_RUN_EVENT_QUEUE                    0</span>
<a name="l00034"></a><a class="code" href="rotator__unit_2main_8h.html#43b806ec990a81e52542eaae8bb085da">00034</a> <span class="preprocessor">#define FLAG_NO_ROTATION                                        1</span>
<a name="l00036"></a><a class="code" href="rotator__unit_2main_8h.html#feb3c8d59a61ae4ef1c2dd4dc3926e2b">00036</a> <span class="preprocessor">#define FLAG_ROTATION_ALLOWED                   2</span>
<a name="l00038"></a><a class="code" href="rotator__unit_2main_8h.html#44f18bbe4a9baa798cab3247600aed29">00038</a> <span class="preprocessor">#define FLAG_ROTATION_CW                                        3</span>
<a name="l00040"></a><a class="code" href="rotator__unit_2main_8h.html#97fb363f64fcd54cf44a3092bd100bf0">00040</a> <span class="preprocessor">#define FLAG_ROTATION_CCW                                       4</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span>
<a name="l00043"></a><a class="code" href="rotator__unit_2main_8h.html#b71563b54386685766f5247cab5b3b2a">00043</a> <span class="preprocessor">#define HEADING_INPUT_POT1                                      1</span>
<a name="l00045"></a><a class="code" href="rotator__unit_2main_8h.html#fa9778f8aac0cb3b459fe88e7fc1617c">00045</a> <span class="preprocessor">#define HEADING_INPUT_POT2                                      2</span>
<a name="l00047"></a><a class="code" href="rotator__unit_2main_8h.html#2e60dab3fd8e3a0fcc11ba548d077865">00047</a> <span class="preprocessor">#define HEADING_INPUT_PULSE_ACT_HI      3</span>
<a name="l00049"></a><a class="code" href="rotator__unit_2main_8h.html#dfd586cdc831632d296620e5cd2eee7d">00049</a> <span class="preprocessor">#define HEADING_INPUT_PULSE_ACT_LO      4</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span>
<a name="l00052"></a><a class="code" href="rotator__unit_2main_8h.html#11f835e0bbc744221cb3706f976aea1e">00052</a> <span class="preprocessor">#define ROTATOR_MODE_HARDWIRED  1</span>
<a name="l00054"></a><a class="code" href="rotator__unit_2main_8h.html#aed991521fa58422d9ffd7ca7ead58e8">00054</a> <span class="preprocessor">#define ROTATOR_MODE_GS232                      2</span>
<a name="l00056"></a><a class="code" href="rotator__unit_2main_8h.html#f3957ba243455590a0faa91f77f61768">00056</a> <span class="preprocessor">#define ROTATOR_MODE_DCU1                               3</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span>
<a name="l00061"></a><a class="code" href="rotator__unit_2main_8h.html#66a134ad7a44eeec5957ab5f86489fa4">00061</a> <span class="preprocessor">#define ROTATION_OUTPUT_FET1            0</span>
<a name="l00063"></a><a class="code" href="rotator__unit_2main_8h.html#8a73c8f9399e6892dfacc5a9e3781971">00063</a> <span class="preprocessor">#define ROTATION_OUTPUT_FET2            1</span>
<a name="l00065"></a><a class="code" href="rotator__unit_2main_8h.html#760fc1d8840019d5b296d6250939b055">00065</a> <span class="preprocessor">#define ROTATION_OUTPUT_RELAY1  2</span>
<a name="l00067"></a><a class="code" href="rotator__unit_2main_8h.html#704e78ba32de183c257dcf5b55c52bb2">00067</a> <span class="preprocessor">#define ROTATION_OUTPUT_RELAY2  3</span>
<a name="l00069"></a><a class="code" href="rotator__unit_2main_8h.html#a3e6524cb57459b286c5d2d3cba559a6">00069</a> <span class="preprocessor">#define ROTATION_OUTPUT_RELAY3  4</span>
<a name="l00071"></a><a class="code" href="rotator__unit_2main_8h.html#bde9dc4a60ab44b759dcc09e9ff875db">00071</a> <span class="preprocessor">#define ROTATION_OUTPUT_RELAY4  5</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span>
<a name="l00074"></a><a class="code" href="rotator__unit_2main_8h.html#fa8464e9e488a0810d3d78660f9c98ed">00074</a> <span class="preprocessor">#define ROTATOR_PATH_SOUTH 0</span>
<a name="l00076"></a><a class="code" href="rotator__unit_2main_8h.html#981128bb3b18b8202a9908ee833316cd">00076</a> <span class="preprocessor">#define ROTATOR_PATH_NORTH 1</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00078"></a>00078 <span class="preprocessor">#define EVENT_QUEUE_ROTATE_CW_ID                        0</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span><span class="preprocessor">#define EVENT_QUEUE_ROTATE_CCW_ID                       1</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span><span class="preprocessor">#define EVENT_QUEUE_ROTATE_STOP_ID              2</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span><span class="preprocessor">#define EVENT_QUEUE_RELEASE_BREAK_ID    3</span>
<a name="l00082"></a>00082 <span class="preprocessor"></span><span class="preprocessor">#define EVENT_QUEUE_ACTIVATE_BREAK_ID   4</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span>
<a name="l00084"></a>00084 
<a name="l00086"></a><a class="code" href="structstruct__settings.html">00086</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00088"></a><a class="code" href="structstruct__settings.html#35c9498008a1fd9ce2c70977e89d4fd8">00088</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> heading_input;
<a name="l00090"></a><a class="code" href="structstruct__settings.html#22a09c356c7dc17194eb23ad238c9647">00090</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> rotator_mode;
<a name="l00092"></a><a class="code" href="structstruct__settings.html#d02f0aef7fc2119eb74a8da5d9fbf5cb">00092</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> cw_output;
<a name="l00094"></a><a class="code" href="structstruct__settings.html#e54dd14cbb95dcf1ab10beca0ff3d484">00094</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ccw_output;
<a name="l00096"></a><a class="code" href="structstruct__settings.html#867927e990a0c40dae34ab99eb59d5a2">00096</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> break_output;
<a name="l00098"></a><a class="code" href="structstruct__settings.html#6b4f2354d9c57e75f564d1e305aaeed7">00098</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ad_conv_average;
<a name="l00101"></a><a class="code" href="structstruct__settings.html#75ab164c17c7479a78c567107657e0dc">00101</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> rotation_delay;
<a name="l00103"></a><a class="code" href="structstruct__settings.html#0fff13a4b466147f17277d1be3a3a19f">00103</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rotation_degree_max;
<a name="l00105"></a><a class="code" href="structstruct__settings.html#5a644a698d899c81425d5248df8cb89d">00105</a>         <span class="keywordtype">int</span> rotation_start_angle;
<a name="l00107"></a><a class="code" href="structstruct__settings.html#7b3ccd43375e07a148fe82d1646b2f7b">00107</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rotation_min;
<a name="l00109"></a><a class="code" href="structstruct__settings.html#c690c8c50736a5c03fdfea58ae24f228">00109</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rotation_max;
<a name="l00111"></a><a class="code" href="structstruct__settings.html#a869668ee7007fa47cc026b0f2c91a18">00111</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> rotation_break_delay;
<a name="l00112"></a>00112 } <a class="code" href="structstruct__settings.html" title="Struct of the settings.">struct_settings</a>;
<a name="l00113"></a>00113 
<a name="l00115"></a><a class="code" href="structstruct__rotator__status.html">00115</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00117"></a><a class="code" href="structstruct__rotator__status.html#1e8f572e95f2bbf9cbcf138b8ece294a">00117</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> curr_heading;
<a name="l00119"></a><a class="code" href="structstruct__rotator__status.html#874197d63b2bca470546738af9e8ccdc">00119</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> last_heading;
<a name="l00121"></a><a class="code" href="structstruct__rotator__status.html#783da12814fdbeb42e23a3d2e1605203">00121</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> curr_heading_ad_val;
<a name="l00123"></a><a class="code" href="structstruct__rotator__status.html#248854b8d65b25fc6ef1479f57288d75">00123</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> last_heading_ad_val;
<a name="l00125"></a><a class="code" href="structstruct__rotator__status.html#8da7678589cdf6f96ccd11da84587ed0">00125</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> target_heading;
<a name="l00127"></a><a class="code" href="structstruct__rotator__status.html#a7fc782e999808cc6fd5063cb727a65b">00127</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> target_heading_ad_val;
<a name="l00129"></a><a class="code" href="structstruct__rotator__status.html#1074cbbf2c22381bfdda7975e6cb9934">00129</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> rotator_speed;
<a name="l00130"></a>00130 } <a class="code" href="structstruct__rotator__status.html" title="Struct of the current rotator status.">struct_rotator_status</a>;
<a name="l00131"></a>00131 
<a name="l00132"></a>00132 <a class="code" href="structstruct__rotator__status.html" title="Struct of the current rotator status.">struct_rotator_status</a> rotator_status;
<a name="l00133"></a>00133 <a class="code" href="structstruct__settings.html" title="Struct of the settings.">struct_settings</a> rotator_settings;
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 <span class="keywordtype">void</span> <a class="code" href="driver__unit_2main_8c.html#e215e459098d842339b421dfc696989a" title="Parse a message and exectute the proper commands This function is used to parse a...">bus_parse_message</a>(<span class="keywordtype">void</span>);
<a name="l00136"></a>00136 <span class="keywordtype">void</span> <a class="code" href="front__panel_2main_8c.html#f496e941a90c0dab928b545c26d30dcc">event_add_message</a>(<span class="keywordtype">void</span> (*func), <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> offset, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <span class="keywordtype">id</span>);
<a name="l00137"></a>00137 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="driver__unit_2main_8c.html#d9e4e537759b32f2e6c232282b310677" title="Read the external DIP-switch. This function is used to read the external offset address...">read_ext_addr</a>(<span class="keywordtype">void</span>);
<a name="l00138"></a>00138 <span class="keywordtype">void</span> <a class="code" href="front__panel_2main_8c.html#2b7f1dd7db9356c199b9db7cb9934b71">event_run</a>(<span class="keywordtype">void</span>);
<a name="l00139"></a>00139 
<a name="l00140"></a>00140 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jan 25 18:28:14 2010 for uC by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
