<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>uC: front_panel/interrupt_handler.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>front_panel/interrupt_handler.c File Reference</h1>Handles different external interrupts.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;avr/io.h&gt;</code><br>
<code>#include &lt;avr/interrupt.h&gt;</code><br>
<code>#include &quot;<a class="el" href="front__panel_2main_8h-source.html">main.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="front__panel_2board_8h-source.html">board.h</a>&quot;</code><br>

<p>
<a href="interrupt__handler_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt__handler_8c.html#87de6417ad629ba7edd240f6d0c9b2c9">ih_poll_buttons</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt__handler_8c.html#4921d984c3419d1d6703d9190069639d">ih_poll_ext_devices</a> (void)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Handles different external interrupts. 
<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Mikael Larsmark, SM2WMV </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>2010-01-25 <div class="fragment"><pre class="fragment"><span class="preprocessor"> #include "<a class="code" href="interrupt__handler_8c.html" title="Handles different external interrupts.">front_panel/interrupt_handler.c</a>"</span> 
</pre></div> </dd></dl>

<p>Definition in file <a class="el" href="interrupt__handler_8c-source.html">interrupt_handler.c</a>.</p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="87de6417ad629ba7edd240f6d0c9b2c9"></a><!-- doxytag: member="interrupt_handler.c::ih_poll_buttons" ref="87de6417ad629ba7edd240f6d0c9b2c9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ih_poll_buttons           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Polls the status of all buttons on the front panel and returns it as an integer. The bit mask pattern is defined in board.h<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Which buttons that are currently pressed, see mask pattern in board.h </dd></dl>

<p>
The following is done because of a hardware bug! The pullups on the uC are too small to actually charge the debounce capacitor in time. The way we solve it is that by making the pin to an output we can charge the capacitor and then go over to using the pin as input and reactivate the pullups again. 
<p>Definition at line <a class="el" href="interrupt__handler_8c-source.html#l00037">37</a> of file <a class="el" href="interrupt__handler_8c-source.html">interrupt_handler.c</a>.</p>

<p>References <a class="el" href="front__panel_2board_8h-source.html#l00249">BUTTON1_RX_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00240">BUTTON1_TX_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00251">BUTTON2_RX_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00242">BUTTON2_TX_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00253">BUTTON3_RX_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00244">BUTTON3_TX_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00255">BUTTON4_RX_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00246">BUTTON4_TX_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00270">BUTTON_AUX1_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00272">BUTTON_AUX2_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00266">BUTTON_MENU_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00268">BUTTON_PULSE_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00258">BUTTON_ROTATE_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00262">BUTTON_RXANT_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00264">BUTTON_SUBMENU_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00260">BUTTON_TXRX_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00306">FLAG_BUTTON1_RX_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00298">FLAG_BUTTON1_TX_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00308">FLAG_BUTTON2_RX_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00300">FLAG_BUTTON2_TX_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00310">FLAG_BUTTON3_RX_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00302">FLAG_BUTTON3_TX_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00312">FLAG_BUTTON4_RX_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00304">FLAG_BUTTON4_TX_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00326">FLAG_BUTTON_AUX1_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00328">FLAG_BUTTON_AUX2_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00314">FLAG_BUTTON_MENU_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00324">FLAG_BUTTON_PULSE_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00316">FLAG_BUTTON_ROTATE_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00320">FLAG_BUTTON_RXANT_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00322">FLAG_BUTTON_SUBMENU_BIT</a>, and <a class="el" href="front__panel_2board_8h-source.html#l00318">FLAG_BUTTON_TXRX_BIT</a>.</p>

<p>Referenced by <a class="el" href="event__handler_8c-source.html#l00323">event_poll_buttons()</a>.</p>

</div>
</div><p>
<a class="anchor" name="4921d984c3419d1d6703d9190069639d"></a><!-- doxytag: member="interrupt_handler.c::ih_poll_ext_devices" ref="4921d984c3419d1d6703d9190069639d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char ih_poll_ext_devices           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Polls the status of all the external inputs. This function does not care if the device is active low or active high. It will just return the current state so the handeling of leveling needs to be done elsewhere. The bit mask pattern is defined in board.h<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The status of the external devices </dd></dl>

<p>Definition at line <a class="el" href="interrupt__handler_8c-source.html#l00108">108</a> of file <a class="el" href="interrupt__handler_8c-source.html">interrupt_handler.c</a>.</p>

<p>References <a class="el" href="front__panel_2board_8h-source.html#l00280">EXT_FOOTSWITCH_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00276">EXT_RADIO_SENSE1_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00278">EXT_RADIO_SENSE2_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00282">EXT_USB1_DTR_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00284">EXT_USB2_DTR_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00286">EXT_USB2_RTS_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00334">STATUS_FOOTSWITCH_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00332">STATUS_RADIO_SENSE1_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00336">STATUS_RADIO_SENSE2_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00338">STATUS_USB1_DTR_BIT</a>, <a class="el" href="front__panel_2board_8h-source.html#l00340">STATUS_USB2_DTR_BIT</a>, and <a class="el" href="front__panel_2board_8h-source.html#l00342">STATUS_USB2_RTS_BIT</a>.</p>

<p>Referenced by <a class="el" href="event__handler_8c-source.html#l00441">event_poll_ext_device()</a>, and <a class="el" href="front__panel_2main_8c-source.html#l00293">main()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed May 19 20:56:58 2010 for uC by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
